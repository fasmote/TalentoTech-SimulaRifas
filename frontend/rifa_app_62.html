<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Rifas - Talento Tech curso NODE.JS</title>
    <style>
        /* ===== RESET Y CONFIGURACIÓN BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box; /* Incluye padding y border en el ancho total */
        }

        /* ===== ESTILOS GENERALES DEL BODY ===== */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); /* Gradiente principal */
            min-height: 100vh; /* Altura mínima de pantalla completa */
            color: #333;
            margin: 0;
            padding-top: 80px; /* Espacio para navbar fija */
        }

        /* ===== NAVEGACIÓN SUPERIOR ===== */
        .navbar {
            position: fixed; /* Fija en la parte superior */
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95); /* Fondo semi-transparente */
            backdrop-filter: blur(10px); /* Efecto blur en el fondo */
            z-index: 100; /* Por encima de otros elementos */
            box-shadow: 0 2px 20px rgba(0,0,0,0.1); /* Sombra sutil */
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between; /* Distribuye espacio entre elementos */
            align-items: center;
            height: 70px;
        }

        /* ===== LOGO DE LA APLICACIÓN ===== */
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
            text-decoration: none;
        }

        /* ===== LINKS DE NAVEGACIÓN ===== */
        .nav-links {
            display: flex;
            list-style: none;
            gap: 30px; /* Espacio entre elementos */
            margin: 0;
            padding: 0;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            padding: 10px 15px;
            border-radius: 8px;
            transition: all 0.3s ease; /* Transición suave para hover */
        }

        .nav-links a:hover {
            background: #667eea;
            color: white;
        }

        .nav-links a.active {
            background: #667eea;
            color: white;
        }

        /* ===== BOTÓN MENÚ MÓVIL ===== */
        .mobile-menu-btn {
            display: none; /* Oculto por defecto */
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #333;
        }

        /* ===== CONTENEDOR PRINCIPAL ===== */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ===== HEADER DE LA PÁGINA ===== */
        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3); /* Sombra para legibilidad */
        }

        .subtitle {
            color: rgba(255,255,255,0.8); /* Blanco semi-transparente */
            font-size: 1.1rem;
        }

        /* ===== GRID PRINCIPAL DE CONTENIDO ===== */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 350px; /* Columna principal y sidebar */
            gap: 30px;
            margin-bottom: 30px;
        }

        /* ===== SECCIÓN DE NÚMEROS ===== */
        .numbers-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); /* Sombra profunda */
        }

        /* ===== CONTROLES DE ACCIÓN ===== */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap; /* Permite que se ajusten en pantallas pequeñas */
            gap: 10px;
        }

        /* ===== ESTILOS GENERALES DE BOTONES ===== */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px; /* Espaciado entre letras */
        }

        /* ===== VARIANTES DE BOTONES CON GRADIENTES ===== */
        .btn-primary {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24); /* Gradiente rojo */
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(45deg, #4834d4, #686de0); /* Gradiente morado */
            color: white;
        }

        .btn-success {
            background: linear-gradient(45deg, #00d2d3, #54a0ff); /* Gradiente azul */
            color: white;
        }

        /* ===== EFECTO HOVER PARA BOTONES ===== */
        .btn:hover {
            transform: translateY(-2px); /* Elevación sutil */
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* ===== GRID DE NÚMEROS DE LA RIFA ===== */
        .numbers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(60px, 1fr)); /* Grid responsivo */
            gap: 8px;
            margin-bottom: 20px;
        }

        /* ===== CELDAS INDIVIDUALES DE NÚMEROS ===== */
        .number-cell {
            aspect-ratio: 1; /* Mantiene proporción cuadrada */
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa; /* Gris claro */
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            user-select: none; /* Previene selección de texto */
        }

        /* ===== ESTADOS DE LAS CELDAS DE NÚMEROS ===== */
        .number-cell:hover {
            background: #e3f2fd; /* Azul claro en hover */
            border-color: #2196f3;
            transform: scale(1.05); /* Ligero agrandamiento */
        }

        .number-cell.selected {
            background: linear-gradient(45deg, #4caf50, #8bc34a); /* Gradiente verde */
            color: white;
            border-color: #4caf50;
            transform: scale(1.1);
        }

        .number-cell.winner {
            background: linear-gradient(45deg, #ffd700, #ffb347); /* Gradiente dorado */
            color: #333;
            border-color: #ffd700;
            animation: pulse 1s infinite; /* Animación pulsante */
        }

        .number-cell.sold {
            background: #ff6b6b !important; /* Rojo para números vendidos */
            color: white !important;
            cursor: not-allowed !important;
            border-color: #ff6b6b !important;
        }

        /* ===== ANIMACIÓN PULSANTE PARA GANADOR ===== */
        @keyframes pulse {
            0% { transform: scale(1.1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1.1); }
        }

        /* ===== SECCIÓN DEL CARRITO/SIDEBAR ===== */
        .cart-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            height: fit-content; /* Se ajusta al contenido */
            max-height: 100%;
            display: flex;
            flex-direction: column;
        }

        /* ===== HEADER DEL CARRITO ===== */
        .cart-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .cart-icon {
            font-size: 1.5rem;
            margin-right: 10px;
        }

        .cart-title {
            font-size: 1.3rem;
            color: #333;
        }

        /* ===== CONTADOR DE ELEMENTOS EN CARRITO ===== */
        .cart-count {
            background: #ff6b6b;
            color: white;
            border-radius: 50%; /* Círculo perfecto */
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            margin-left: auto; /* Se mueve al extremo derecho */
        }

        /* ===== LISTA DE ELEMENTOS DEL CARRITO ===== */
        .cart-items {
            overflow-y: auto; /* Scroll vertical si es necesario */
            margin-bottom: 20px;
            flex-grow: 1; /* Ocupa espacio disponible */
            max-height: 400px;
        }

        /* ===== ELEMENTO INDIVIDUAL DEL CARRITO ===== */
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
            margin-bottom: 5px;
        }

        .cart-item-number {
            font-weight: bold;
            color: #4caf50; /* Verde para números seleccionados */
        }

        /* ===== BOTÓN PARA ELIMINAR ELEMENTO ===== */
        .remove-btn {
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .remove-btn:hover {
            background: #ff3742; /* Rojo más oscuro en hover */
        }

        /* ===== ESTADO VACÍO DEL CARRITO ===== */
        .empty-cart {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 20px;
        }

        /* ===== MODAL DE GANADOR ===== */
        .winner-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8); /* Overlay semi-transparente */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000; /* Por encima de todo */
            animation: fadeIn 0.3s ease;
        }

        /* ===== CONTENIDO DEL MODAL ===== */
        .winner-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 400px;
            width: 90%;
            animation: slideIn 0.5s ease;
        }

        /* ===== ANIMACIONES PARA EL MODAL ===== */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-50px) scale(0.8); opacity: 0; }
            to { transform: translateY(0) scale(1); opacity: 1; }
        }

        /* ===== DISPLAY DEL NÚMERO GANADOR ===== */
        .winner-display {
            font-size: 3rem;
            font-weight: bold;
            color: #ffd700; /* Dorado */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin: 20px 0;
        }

        .winner-text {
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 15px;
        }

        /* ===== SISTEMA DE NOTIFICACIONES ===== */
        .notification {
            position: fixed;
            top: 100px; /* Debajo de la navbar */
            right: 20px;
            background: #4caf50; /* Verde para éxito */
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 1001;
            animation: slideInRight 0.3s ease;
        }

        .notification.error {
            background: #ff6b6b; /* Rojo para errores */
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* ===== GRID DE RIFAS PÚBLICAS ===== */
        .rifas-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Grid responsivo */
            gap: 25px;
            margin-bottom: 30px;
        }

        /* ===== TARJETA DE RIFA INDIVIDUAL ===== */
        .rifa-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .rifa-card:hover {
            transform: translateY(-5px); /* Elevación en hover */
        }

        .rifa-image {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .rifa-card h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .rifa-description {
            color: #666;
            margin-bottom: 15px;
        }

        /* ===== BARRA DE PROGRESO ===== */
        .rifa-progress {
            margin-bottom: 15px;
        }

        .progress-bar {
            background: #e9ecef; /* Fondo gris */
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .progress-fill {
            background: linear-gradient(45deg, #4caf50, #8bc34a); /* Gradiente verde */
            height: 100%;
            transition: width 0.3s ease; /* Animación del progreso */
        }

        .progress-text {
            font-size: 0.9rem;
            color: #666;
        }

        .rifa-price {
            font-size: 1.2rem;
            font-weight: bold;
            color: #4caf50;
            margin-bottom: 15px;
        }

        /* ===== HEADERS DE PÁGINAS ===== */
        .page-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .page-header h1 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        /* ===== CONTENIDO DEL PERFIL ===== */
        .profile-content {
            display: grid;
            gap: 30px;
        }

        .profile-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .profile-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        /* ===== GRID DE ESTADÍSTICAS ===== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }

        /* ===== TARJETA DE ESTADÍSTICA INDIVIDUAL ===== */
        .stat-card {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #4caf50; /* Verde para números importantes */
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        /* ===== LISTA DE NÚMEROS DE USUARIO ===== */
        .user-numbers {
            display: grid;
            gap: 10px;
        }

        /* ===== ENTRADA INDIVIDUAL DE NÚMERO ===== */
        .number-entry {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .rifa-name {
            font-weight: bold;
            color: #333;
        }

        .user-number {
            color: #666;
        }

        /* ===== ESTADOS DE RIFAS ===== */
        .status {
            padding: 5px 15px;
            border-radius: 20px; /* Forma de píldora */
            font-size: 0.8rem;
            font-weight: bold;
        }

        .status.active {
            background: #e3f2fd; /* Azul claro */
            color: #2196f3;
        }

        .status.winner {
            background: #fff3e0; /* Naranja claro */
            color: #ff9800;
        }

        /* ===== FORMULARIOS ===== */
        .create-rifa-form {
            display: grid;
            gap: 15px;
        }

        .form-input, .form-textarea {
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: #4caf50; /* Verde en foco */
        }

        .form-textarea {
            resize: vertical; /* Solo redimensión vertical */
            min-height: 100px;
        }

        /* ===== CONTENIDO DETALLE DE RIFA ===== */
        .rifa-detail-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
            margin-bottom: 30px;
        }

        /* ===== INFORMACIÓN DE RIFA ===== */
        .rifa-info {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            height: fit-content;
        }

        .rifa-info h3 {
            color: #333;
            margin-bottom: 15px;
        }

        .rifa-info p {
            margin-bottom: 10px;
            color: #666;
        }

        /* ===== BOTONES DE NAVEGACIÓN ===== */
        .back-to-demo, .back-buttons {
            text-align: center;
            margin-top: 30px;
        }

        .back-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        /* ===== TARJETAS DE RIFAS DE USUARIO ===== */
        .user-rifa-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #4caf50; /* Borde izquierdo verde */
        }

        .user-rifa-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .user-rifa-header h4 {
            margin: 0;
            color: #333;
            font-size: 1.1rem;
        }

        .rifa-date {
            font-size: 0.8rem;
            color: #666;
            background: #e9ecef;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .user-rifa-description {
            color: #666;
            margin-bottom: 15px;
            font-style: italic;
        }

        .user-rifa-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
        }

        .stat-item {
            font-size: 0.9rem;
            color: #555;
        }

        .user-rifa-actions {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.8rem;
        }

        /* ===== MEDIA QUERIES PARA RESPONSIVIDAD ===== */
        /* Pantallas tablet y menores */
        @media (max-width: 768px) {
            /* Navegación móvil */
            .nav-links {
                display: none; /* Oculto por defecto */
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: rgba(255, 255, 255, 0.98);
                backdrop-filter: blur(10px);
                flex-direction: column;
                padding: 20px;
                box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            }

            .nav-links.active {
                display: flex; /* Mostrar cuando está activo */
            }

            .mobile-menu-btn {
                display: block; /* Mostrar botón de menú móvil */
            }

            /* Layout en columna única */
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            /* Tipografía más pequeña */
            h1 {
                font-size: 2rem;
            }

            /* Grid de números optimizado para móvil */
            .numbers-grid {
                grid-template-columns: repeat(10, 1fr); /* 10 columnas fijas */
            }

            .number-cell {
                font-size: 1rem;
            }

            /* Controles centrados */
            .controls {
                justify-content: center;
            }

            .btn {
                padding: 10px 16px;
                font-size: 0.9rem;
            }

            /* Detalle de rifa en columna única */
            .rifa-detail-content {
                grid-template-columns: 1fr;
            }
            
            .back-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .user-rifa-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .user-rifa-stats {
                flex-direction: column;
                gap: 5px;
            }
            
            .user-rifa-actions {
                justify-content: center;
            }
        }

        /* Pantallas móviles pequeñas */
        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }

            /* Grid de números más compacto */
            .numbers-grid {
                grid-template-columns: repeat(8, 1fr); /* 8 columnas para pantallas muy pequeñas */
                gap: 4px;
            }

            .number-cell {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- ===== NAVEGACIÓN PRINCIPAL ===== -->
    <nav class="navbar">
        <div class="nav-container">
            <!-- Logo de la aplicación -->
            <a href="#" class="logo">🎲 SimulaRifa TT</a>
            
            <!-- Enlaces de navegación -->
            <ul class="nav-links" id="navLinks">
                <li><a href="#" class="active" onclick="navigateTo('demo')">Inicio</a></li>
                <li><a href="#" onclick="navigateTo('rifas')">Simulaciones Públicas</a></li>
                <li><a href="#" onclick="navigateTo('perfil')">Mi Perfil</a></li>
            </ul>
            
            <!-- Botón para menú móvil -->
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">☰</button>
        </div>
    </nav>

    <!-- ===== CONTENEDOR PRINCIPAL ===== -->
    <div class="container">
        <!-- Header con título y descripción -->
        <header>
            <h1>🎲 Simulador de Rifas</h1>
            <p class="subtitle">Proyecto desarrollado en Talento Tech curso NODE.JS</p>
        </header>

        <!-- Contenido principal dividido en dos columnas -->
        <div class="main-content">
            <!-- ===== SECCIÓN DE NÚMEROS DE LA RIFA ===== -->
            <div class="numbers-section">
                <!-- Controles de acción -->
                <div class="controls">
                    <button class="btn btn-secondary" onclick="selectRandomNumber()">
                        🎯 Elegir al Azar
                    </button>
                    <button class="btn btn-primary" onclick="clearSelection()">
                        🗑️ Limpiar Todo
                    </button>
                    <button class="btn btn-success" onclick="drawWinner()">
                        🏆 Sortear Ganador
                    </button>
                </div>
                
                <!-- Grid de números (generado dinámicamente) -->
                <div class="numbers-grid" id="numbersGrid">
                    <!-- Los números se generan con JavaScript -->
                </div>
            </div>

            <!-- ===== SECCIÓN DEL CARRITO/SIDEBAR ===== -->
            <div class="cart-section">
                <!-- Header del carrito -->
                <div class="cart-header">
                    <span class="cart-icon">🛒</span>
                    <h3 class="cart-title">Mis Números</h3>
                    <div class="cart-count" id="cartCount">0</div>
                </div>
                
                <!-- Lista de números seleccionados -->
                <div class="cart-items" id="cartItems">
                    <div class="empty-cart">
                        No has seleccionado números aún
                    </div>
                </div>
                
                <!-- Botón principal de acción -->
                <button class="btn btn-primary" style="width: 100%;" onclick="drawWinner()">
                    🎊 ¡Simular Sorteo!
                </button>
            </div>
        </div>

        <!-- ===== MODAL DE GANADOR ===== -->
        <div class="winner-modal" id="winnerModal" style="display: none;">
            <div class="winner-content">
                <h2>🎉 ¡Tenemos un Ganador! 🎉</h2>
                <div class="winner-display" id="winnerNumber">--</div>
                <p class="winner-text">¡Felicidades al ganador del número <span id="winnerText">--</span>!</p>
                
                <!-- Botones del modal -->
                <button class="btn btn-secondary" onclick="closeWinnerModal()">
                    ✓ Cerrar
                </button>
                <button class="btn btn-primary" onclick="resetGame()" style="margin-left: 10px;">
                    🔄 Nueva Simulación
                </button>
            </div>
        </div>
    </div>

    <script>
        // ===== VARIABLES GLOBALES =====
        // Array global para almacenar rifas creadas por el usuario
        let userRifas = [];
        // Array para números seleccionados en la simulación actual
        let selectedNumbers = [];
        // Variable para almacenar el número ganador
        let winnerNumber = null;

        // ===== FUNCIONES DE NAVEGACIÓN =====
        
        /**
         * Alternar visibilidad del menú móvil
         */
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
        }

        /**
         * Navegar entre diferentes páginas de la aplicación
         * @param {string} page - Nombre de la página a mostrar
         */
        function navigateTo(page) {
            // Simular navegación SPA (Single Page Application)
            switch(page) {
                case 'rifas':
                    showRifasPage();
                    updateActiveNav('rifas');
                    break;
                case 'perfil':
                    showPerfilPage();
                    updateActiveNav('perfil');
                    break;
                case 'demo':
                    showDemoPage();
                    updateActiveNav('demo');
                    break;
            }
            
            // Cerrar menú móvil después de navegar
            document.getElementById('navLinks').classList.remove('active');
        }

        /**
         * Actualizar el estado activo en la navegación
         * @param {string} activePage - Página actualmente activa
         */
        function updateActiveNav(activePage) {
            // Remover clase active de todos los enlaces
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.classList.remove('active');
            });
            
            // Activar el enlace correspondiente
            const pageIndex = activePage === 'demo' ? 0 : activePage === 'rifas' ? 1 : 2;
            document.querySelectorAll('.nav-links a')[pageIndex].classList.add('active');
        }

        // ===== FUNCIONES DE PÁGINAS =====

        /**
         * Mostrar página de simulaciones públicas
         */
        function showRifasPage() {
            document.querySelector('.container').innerHTML = `
                <div class="page-header">
                    <h1>🎊 Simulaciones Públicas</h1>
                    <p class="subtitle">Ejemplos desarrollados en Talento Tech curso NODE.JS</p>
                </div>
                
                <!-- Información sobre el propósito educativo -->
                <div style="background: rgba(255,255,255,0.9); padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center;">
                    <p style="margin: 0; color: #666; font-style: italic;">
                        🎯 <strong>Proyecto Educativo Talento Tech curso NODE.JS</strong> - Simulaciones para aprender desarrollo backend
                    </p>
                </div>
                
                <!-- Grid de rifas de ejemplo -->
                <div class="rifas-grid">
                    <div class="rifa-card">
                        <div class="rifa-image">🎮</div>
                        <h3>PlayStation 5</h3>
                        <p class="rifa-description">Ejemplo de simulación para evento gaming</p>
                        <div class="rifa-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 65%"></div>
                            </div>
                            <span class="progress-text">65/100 números seleccionados</span>
                        </div>
                        <div class="rifa-price" style="color: #2196f3;">Simulación educativa</div>
                        <button class="btn btn-primary" onclick="showRifaDetail('ps5')">Ver Simulación</button>
                    </div>
                    
                    <div class="rifa-card">
                        <div class="rifa-image">📱</div>
                        <h3>iPhone 15 Pro</h3>
                        <p class="rifa-description">Ejemplo de aplicación Node.js con base de datos</p>
                        <div class="rifa-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 30%"></div>
                            </div>
                            <span class="progress-text">30/100 números seleccionados</span>
                        </div>
                        <div class="rifa-price" style="color: #2196f3;">Demo Backend</div>
                        <button class="btn btn-primary" onclick="showRifaDetail('iphone')">Ver Simulación</button>
                    </div>
                    
                    <div class="rifa-card">
                        <div class="rifa-image">🛏️</div>
                        <h3>Set de Toallas y Sábanas</h3>
                        <p class="rifa-description">Práctica de CRUD con Express y SQLite</p>
                        <div class="rifa-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 45%"></div>
                            </div>
                            <span class="progress-text">45/100 números seleccionados</span>
                        </div>
                        <div class="rifa-price" style="color: #2196f3;">Ejercicio práctico</div>
                        <button class="btn btn-primary" onclick="showRifaDetail('textiles')">Ver Simulación</button>
                    </div>
                    
                    ${generateUserRifasHTML()}
                </div>
                
                <div class="back-to-demo">
                    <button class="btn btn-secondary" onclick="navigateTo('demo')">← Volver al Inicio</button>
                </div>
            `;
            
            console.log('Página de Simulaciones Públicas cargada. Simulaciones de usuario:', userRifas.length);
        }

        /**
         * Generar HTML para rifas creadas por el usuario
         * @returns {string} HTML de las rifas del usuario
         */
        function generateUserRifasHTML() {
            return userRifas.map(rifa => `
                <div class="rifa-card">
                    <div class="rifa-image">🎁</div>
                    <h3>${rifa.title}</h3>
                    <p class="rifa-description">${rifa.description}</p>
                    <div class="rifa-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${(rifa.sold.length / 100) * 100}%"></div>
                        </div>
                        <span class="progress-text">${rifa.sold.length}/100 números seleccionados</span>
                    </div>
                    <div class="rifa-price" style="color: #2196f3;">Creada por estudiante</div>
                    <button class="btn btn-primary" onclick="showRifaDetail('user_${rifa.id}')">Ver Simulación</button>
                </div>
            `).join('');
        }

        /**
         * Mostrar página de perfil del usuario
         */
        function showPerfilPage() {
            document.querySelector('.container').innerHTML = `
                <div class="page-header">
                    <h1>👤 Mi Perfil</h1>
                    <p class="subtitle">Panel de estudiante - Talento Tech curso NODE.JS</p>
                </div>
                
                <div class="profile-content">
                    <!-- Estadísticas del estudiante -->
                    <div class="profile-section">
                        <h3>📊 Mis Estadísticas de Aprendizaje</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number">5</div>
                                <div class="stat-label">Simulaciones Probadas</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">${userRifas.length}</div>
                                <div class="stat-label">Proyectos Creados</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">1</div>
                                <div class="stat-label">Módulos Completados</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Historial de simulaciones -->
                    <div class="profile-section">
                        <h3>🎫 Mis Simulaciones de Práctica</h3>
                        <div class="user-numbers">
                            <div class="number-entry">
                                <span class="rifa-name">PlayStation 5</span>
                                <span class="user-number">Número 23</span>
                                <span class="status active">Practicado</span>
                            </div>
                            <div class="number-entry">
                                <span class="rifa-name">iPhone 15 Pro</span>
                                <span class="user-number">Número 67</span>
                                <span class="status active">Practicado</span>
                            </div>
                            <div class="number-entry">
                                <span class="rifa-name">Ejercicio Anterior</span>
                                <span class="user-number">Número 45</span>
                                <span class="status winner">¡Ganador!</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Formulario para crear nueva simulación -->
                    <div class="profile-section">
                        <h3>➕ Crear Nueva Simulación de Práctica</h3>
                        <p style="color: #666; margin-bottom: 15px; font-style: italic;">
                            🎯 Practica creando tus propias simulaciones con Talento Tech curso NODE.JS
                        </p>
                        <div class="create-rifa-form">
                            <input type="text" placeholder="Título del proyecto (ej: Mi Primera Rifa TT NODE.JS)" class="form-input" id="rifaTitle">
                            <textarea placeholder="Descripción de la simulación o premio" class="form-textarea" id="rifaDescription"></textarea>
                            <input type="text" placeholder="Categoría (ej: Práctica, Proyecto, Ejercicio)" class="form-input" id="rifaPrice">
                            <button type="button" class="btn btn-success" onclick="createNewRifa()">Crear Simulación</button>
                        </div>
                    </div>
                    
                    <!-- Lista de simulaciones creadas -->
                    <div class="profile-section" id="userRifasSection">
                        <h3>🎯 Mis Simulaciones Creadas</h3>
                        <div id="userRifasList">
                            ${userRifas.length === 0 ? '<p style="color: #666; text-align: center; padding: 20px;">No has creado ninguna simulación aún</p>' : ''}
                        </div>
                    </div>
                </div>
                
                <div class="back-to-demo">
                    <button class="btn btn-secondary" onclick="navigateTo('demo')">← Volver al Inicio</button>
                </div>
            `;
            
            // Actualizar la lista de rifas después de cargar la página
            setTimeout(() => {
                updateUserRifasList();
            }, 100);
        }

        /**
         * Mostrar página principal de demostración
         */
        function showDemoPage() {
            // Restaurar contenido original de la demo
            document.querySelector('.container').innerHTML = `
                <header>
                    <h1>🎲 Simulador de Rifas</h1>
                    <p class="subtitle">Proyecto desarrollado en Talento Tech curso NODE.JS</p>
                </header>

                <div class="main-content">
                    <div class="numbers-section">
                        <div class="controls">
                            <button class="btn btn-secondary" onclick="selectRandomNumber()">
                                🎯 Elegir al Azar
                            </button>
                            <button class="btn btn-primary" onclick="clearSelection()">
                                🗑️ Limpiar Todo
                            </button>
                            <button class="btn btn-success" onclick="drawWinner()">
                                🏆 Simular Sorteo
                            </button>
                        </div>
                        
                        <div class="numbers-grid" id="numbersGrid">
                            <!-- Los números se generan con JavaScript -->
                        </div>
                    </div>

                    <div class="cart-section">
                        <div class="cart-header">
                            <span class="cart-icon">🎯</span>
                            <h3 class="cart-title">Números Seleccionados</h3>
                            <div class="cart-count" id="cartCount">0</div>
                        </div>
                        
                        <div class="cart-items" id="cartItems">
                            <div class="empty-cart">
                                No has seleccionado números aún
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" style="width: 100%;" onclick="drawWinner()">
                            🎊 ¡Simular Sorteo!
                        </button>
                    </div>
                </div>
            `;
            
            // Reinicializar la funcionalidad de la demo
            selectedNumbers = [];
            winnerNumber = null;
            generateNumbersGrid();
            updateCart();
        }

        /**
         * Mostrar detalle de una rifa específica
         * @param {string} rifaId - ID de la rifa a mostrar
         */
        function showRifaDetail(rifaId) {
            // Datos predefinidos para las rifas de ejemplo
            const rifaData = {
                'ps5': { name: 'PlayStation 5', price: 'Simulación educativa', sold: [12, 23, 45, 67, 89] },
                'iphone': { name: 'iPhone 15 Pro', price: 'Demo Backend', sold: [5, 18, 34, 56, 78] },
                'textiles': { name: 'Set de Toallas y Sábanas', price: 'Ejercicio práctico', sold: [3, 15, 27, 41, 58, 73, 86] }
            };
            
            let rifa;
            
            // Verificar si es una rifa creada por el usuario
            if (rifaId.startsWith('user_')) {
                const userRifaId = parseInt(rifaId.replace('user_', ''));
                const userRifa = userRifas.find(r => r.id === userRifaId);
                if (userRifa) {
                    rifa = {
                        name: userRifa.title,
                        price: userRifa.price,
                        sold: userRifa.sold
                    };
                }
            } else {
                rifa = rifaData[rifaId];
            }
            
            if (!rifa) {
                showNotification('Simulación no encontrada', 'error');
                return;
            }
            
            // Generar HTML para la página de detalle
            document.querySelector('.container').innerHTML = `
                <div class="page-header">
                    <h1>🎯 ${rifa.name}</h1>
                    <p class="subtitle">Categoría: ${rifa.price}</p>
                </div>
                
                <div class="rifa-detail-content">
                    <div class="numbers-section">
                        <h3>Selecciona números para practicar</h3>
                        <div class="numbers-grid" id="rifaNumbersGrid">
                            <!-- Los números se generan con JavaScript -->
                        </div>
                    </div>
                    
                    <div class="rifa-info">
                        <h3>Información de la Simulación</h3>
                        <p><strong>Proyecto:</strong> ${rifa.name}</p>
                        <p><strong>Tipo:</strong> ${rifa.price}</p>
                        <p><strong>Números simulados:</strong> ${rifa.sold.length}/100</p>
                        <p><strong>Curso:</strong> Talento Tech curso NODE.JS</p>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 20px;">
                            Practicar con Números Seleccionados
                        </button>
                    </div>
                </div>
                
                <div class="back-buttons">
                    <button class="btn btn-secondary" onclick="navigateTo('rifas')">← Volver a Simulaciones</button>
                    <button class="btn btn-secondary" onclick="navigateTo('demo')">Ir al Inicio</button>
                </div>
            `;
            
            // Generar grilla de números con algunos ya "vendidos" para la demo
            generateRifaGrid(rifa.sold);
        }

        // ===== FUNCIONES DE GENERACIÓN DE GRILLAS =====

        /**
         * Generar grilla de números para rifas con números ya vendidos
         * @param {Array} soldNumbers - Array de números ya vendidos
         */
        function generateRifaGrid(soldNumbers) {
            const grid = document.getElementById('rifaNumbersGrid');
            grid.innerHTML = '';
            
            for (let i = 0; i <= 99; i++) {
                const cell = document.createElement('div');
                cell.className = 'number-cell';
                cell.textContent = i.toString().padStart(2, '0'); // Formato 00, 01, 02...
                
                if (soldNumbers.includes(i)) {
                    // Número ya vendido/seleccionado
                    cell.classList.add('sold');
                    cell.style.background = '#ff6b6b';
                    cell.style.color = 'white';
                    cell.style.cursor = 'not-allowed';
                    cell.title = 'Número ya seleccionado en la simulación';
                } else {
                    // Número disponible
                    cell.onclick = () => toggleRifaNumber(i);
                }
                
                cell.id = `rifa-number-${i}`;
                grid.appendChild(cell);
            }
        }

        /**
         * Alternar selección de número en rifa
         * @param {number} number - Número a alternar
         */
        function toggleRifaNumber(number) {
            const cell = document.getElementById(`rifa-number-${number}`);
            if (cell && !cell.classList.contains('sold')) {
                cell.classList.toggle('selected');
            }
        }

        /**
         * Generar la grilla principal de números (0-99)
         */
        function generateNumbersGrid() {
            const grid = document.getElementById('numbersGrid');
            grid.innerHTML = '';
            
            for (let i = 0; i <= 99; i++) {
                const cell = document.createElement('div');
                cell.className = 'number-cell';
                cell.textContent = i.toString().padStart(2, '0');
                cell.onclick = () => toggleNumber(i);
                cell.id = `number-${i}`;
                grid.appendChild(cell);
            }
        }

        // ===== FUNCIONES DE JUEGO =====

        /**
         * Alternar selección de un número
         * @param {number} number - Número a alternar (0-99)
         */
        function toggleNumber(number) {
            const cell = document.getElementById(`number-${number}`);
            const index = selectedNumbers.indexOf(number);
            
            if (index > -1) {
                // Deseleccionar número
                selectedNumbers.splice(index, 1);
                cell.classList.remove('selected');
            } else {
                // Seleccionar número
                selectedNumbers.push(number);
                cell.classList.add('selected');
            }
            
            updateCart();
        }

        /**
         * Actualizar vista del carrito con números seleccionados
         */
        function updateCart() {
            const cartItems = document.getElementById('cartItems');
            const cartCount = document.getElementById('cartCount');
            
            // Verificar que los elementos existen (para evitar errores en otras páginas)
            if (!cartItems || !cartCount) return;
            
            // Actualizar contador
            cartCount.textContent = selectedNumbers.length;
            
            if (selectedNumbers.length === 0) {
                cartItems.innerHTML = '<div class="empty-cart">No has seleccionado números aún</div>';
                return;
            }
            
            // Ordenar números y mostrarlos
            const sortedNumbers = [...selectedNumbers].sort((a, b) => a - b);
            cartItems.innerHTML = sortedNumbers.map(number => `
                <div class="cart-item">
                    <span class="cart-item-number">${number.toString().padStart(2, '0')}</span>
                    <button class="remove-btn" onclick="toggleNumber(${number})">✕</button>
                </div>
            `).join('');
        }

        /**
         * Seleccionar un número al azar
         */
        function selectRandomNumber() {
            const randomNumber = Math.floor(Math.random() * 100);
            
            if (!selectedNumbers.includes(randomNumber)) {
                selectedNumbers.push(randomNumber);
                document.getElementById(`number-${randomNumber}`).classList.add('selected');
                updateCart();
            }
        }

        /**
         * Limpiar toda la selección
         */
        function clearSelection() {
            // Remover clases de todos los números seleccionados
            selectedNumbers.forEach(number => {
                const cell = document.getElementById(`number-${number}`);
                if (cell) {
                    cell.classList.remove('selected', 'winner');
                }
            });
            
            // Limpiar arrays y variables
            selectedNumbers = [];
            winnerNumber = null;
            updateCart();
            
            // Cerrar modal si está abierto
            const winnerModal = document.getElementById('winnerModal');
            if (winnerModal) {
                winnerModal.style.display = 'none';
            }
        }

        /**
         * Realizar sorteo y determinar ganador
         */
        function drawWinner() {
            if (selectedNumbers.length === 0) {
                showNotification('¡Primero debes seleccionar al menos un número!', 'error');
                return;
            }

            // Limpiar ganador anterior
            if (winnerNumber !== null) {
                const prevWinnerCell = document.getElementById(`number-${winnerNumber}`);
                if (prevWinnerCell) {
                    prevWinnerCell.classList.remove('winner');
                }
            }

            // Seleccionar ganador al azar de los números seleccionados
            const randomIndex = Math.floor(Math.random() * selectedNumbers.length);
            winnerNumber = selectedNumbers[randomIndex];
            
            // Mostrar animación de ganador
            const winnerCell = document.getElementById(`number-${winnerNumber}`);
            if (winnerCell) {
                winnerCell.classList.add('winner');
            }
            
            // Mostrar modal con resultado
            const winnerModal = document.getElementById('winnerModal');
            if (winnerModal) {
                const winnerDisplay = document.getElementById('winnerNumber');
                const winnerText = document.getElementById('winnerText');
                
                winnerDisplay.textContent = winnerNumber.toString().padStart(2, '0');
                winnerText.textContent = winnerNumber.toString().padStart(2, '0');
                winnerModal.style.display = 'flex';
            }
        }

        /**
         * Cerrar modal de ganador
         */
        function closeWinnerModal() {
            const winnerModal = document.getElementById('winnerModal');
            if (winnerModal) {
                winnerModal.style.display = 'none';
            }
        }

        /**
         * Resetear juego completo
         */
        function resetGame() {
            clearSelection();
            closeWinnerModal();
        }

        // ===== FUNCIONES DE UTILIDAD =====

        /**
         * Mostrar notificación temporal
         * @param {string} message - Mensaje a mostrar
         * @param {string} type - Tipo de notificación ('success' o 'error')
         */
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type === 'error' ? 'error' : ''}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Remover después de 3 segundos
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // ===== FUNCIONES DE GESTIÓN DE RIFAS DE USUARIO =====

        /**
         * Crear nueva rifa/simulación
         */
        function createNewRifa() {
            console.log('Creando nueva simulación...');
            
            // Obtener elementos del formulario
            const titleElement = document.getElementById('rifaTitle');
            const descriptionElement = document.getElementById('rifaDescription');
            const priceElement = document.getElementById('rifaPrice');
            
            if (!titleElement || !descriptionElement || !priceElement) {
                showNotification('Error: No se encontraron los campos del formulario', 'error');
                return;
            }
            
            // Obtener valores
            const title = titleElement.value.trim();
            const description = descriptionElement.value.trim();
            const price = priceElement.value.trim();
            
            // Validar campos
            if (!title || !description || !price) {
                showNotification('Por favor completa todos los campos', 'error');
                return;
            }
            
            // Crear nueva simulación
            const newRifa = {
                id: Date.now(), // ID único basado en timestamp
                title: title,
                description: description,
                price: price,
                sold: [], // Array de números vendidos (vacío inicialmente)
                created: new Date().toLocaleDateString('es-ES')
            };
            
            // Agregar a array global
            userRifas.push(newRifa);
            
            // Limpiar formulario
            titleElement.value = '';
            descriptionElement.value = '';
            priceElement.value = '';
            
            // Actualizar interfaz
            updateUserRifasList();
            
            // Actualizar estadísticas si estamos en la página correcta
            const statNumber = document.querySelector('.stat-card:nth-child(2) .stat-number');
            if (statNumber) {
                statNumber.textContent = userRifas.length;
            }
            
            showNotification(`¡Simulación "${title}" creada exitosamente!`);
        }

        /**
         * Actualizar lista de rifas del usuario en la interfaz
         */
        function updateUserRifasList() {
            const userRifasList = document.getElementById('userRifasList');
            
            if (!userRifasList) {
                return; // No estamos en la página de perfil
            }
            
            if (userRifas.length === 0) {
                userRifasList.innerHTML = '<p style="color: #666; text-align: center; padding: 20px;">No has creado ninguna simulación aún</p>';
                return;
            }
            
            // Generar HTML para cada rifa
            userRifasList.innerHTML = userRifas.map(rifa => `
                <div class="user-rifa-card">
                    <div class="user-rifa-header">
                        <h4>${rifa.title}</h4>
                        <span class="rifa-date">Creada: ${rifa.created}</span>
                    </div>
                    <p class="user-rifa-description">${rifa.description}</p>
                    <div class="user-rifa-stats">
                        <span class="stat-item">📚 Categoría: ${rifa.price}</span>
                        <span class="stat-item">📊 ${rifa.sold.length}/100 números</span>
                    </div>
                    <div class="user-rifa-actions">
                        <button class="btn btn-secondary btn-small" onclick="editRifa(${rifa.id})">✏️ Editar</button>
                        <button class="btn btn-primary btn-small" onclick="deleteRifa(${rifa.id})">🗑️ Eliminar</button>
                    </div>
                </div>
            `).join('');
        }

        /**
         * Editar una rifa existente
         * @param {number} rifaId - ID de la rifa a editar
         */
        function editRifa(rifaId) {
            const rifa = userRifas.find(r => r.id === rifaId);
            if (!rifa) return;
            
            // Mostrar prompts para editar
            const newTitle = prompt('Nuevo título:', rifa.title);
            if (newTitle === null) return; // Usuario canceló
            
            const newDescription = prompt('Nueva descripción:', rifa.description);
            if (newDescription === null) return;
            
            const newPrice = prompt('Nueva categoría:', rifa.price);
            if (newPrice === null) return;
            
            // Actualizar si se proporcionaron todos los valores
            if (newTitle && newDescription && newPrice) {
                rifa.title = newTitle;
                rifa.description = newDescription;
                rifa.price = newPrice;
                updateUserRifasList();
                showNotification('Simulación actualizada exitosamente!');
            }
        }

        /**
         * Eliminar una rifa
         * @param {number} rifaId - ID de la rifa a eliminar
         */
        function deleteRifa(rifaId) {
            if (confirm('¿Estás seguro de que quieres eliminar esta simulación?')) {
                userRifas = userRifas.filter(r => r.id !== rifaId);
                updateUserRifasList();
                
                // Actualizar estadísticas
                const statNumber = document.querySelector('.stat-card:nth-child(2) .stat-number');
                if (statNumber) {
                    statNumber.textContent = userRifas.length;
                }
                
                showNotification('Simulación eliminada exitosamente!');
            }
        }

        // ===== INICIALIZACIÓN =====
        
        /**
         * Inicializar la aplicación cuando el DOM esté listo
         */
        document.addEventListener('DOMContentLoaded', function() {
            // Generar grilla inicial y actualizar interfaz
            generateNumbersGrid();
            updateCart();
            
            console.log('Simulador de Rifas inicializado - Talento Tech curso NODE.JS');
        });
    </script>
</body>
</html>